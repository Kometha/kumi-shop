<div class="app-versions-container">
  <!-- Header -->
  <div class="header-section mb-6">
    <h1 class="page-title">Versiones de la Aplicación Móvil</h1>
    <p class="page-subtitle">Gestiona y descarga las versiones disponibles de la aplicación</p>
  </div>

  <!-- Table Container -->
  <div class="table-container bg-white rounded-lg shadow-sm border border-gray-200">
    <p-table
      [value]="appVersions"
      [paginator]="true"
      [rows]="10"
      [showCurrentPageReport]="true"
      [loading]="loading"
      currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} versiones"
      [rowsPerPageOptions]="[10, 25, 50]"
      styleClass="p-datatable-gridlines"
      [responsive]="true"
    >
      <ng-template pTemplate="header">
        <tr>
          <th style="width: 80px">ID</th>
          <th>Versión</th>
          <th>Descripción</th>
          <th style="width: 200px" class="text-center">Descargar APK</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-version>
        <tr>
          <!-- ID -->
          <td class="font-semibold text-gray-600">{{ version.id }}</td>

          <!-- Versión -->
          <td class="font-medium text-gray-800">{{ version.version_name }}</td>

          <!-- Descripción -->
          <td>
            <span class="text-gray-600">
              {{ version.description || 'Sin descripción' }}
            </span>
          </td>

          <!-- Descargar APK -->
          <td class="text-center">
            @if (version.apk_url) {
              <button
                pButton
                type="button"
                icon="pi pi-download"
                label="Descargar"
                class="p-button-primary p-button-sm download-btn"
                (click)="downloadApk(version.apk_url, version.version_name)"
              ></button>
            } @else {
              <span class="text-gray-400 text-sm">No disponible</span>
            }
          </td>
        </tr>
      </ng-template>

      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="4" class="text-center py-8">
            <div class="empty-state">
              <i class="pi pi-mobile text-4xl text-gray-300 mb-3"></i>
              <p class="text-gray-500">No hay versiones disponibles</p>
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>

<p-toast></p-toast>

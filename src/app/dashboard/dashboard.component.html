<div class="min-h-screen bg-gray-50 relative">
  <!-- Fondo con gradiente más claro -->
  <div class="fixed inset-0 -z-10">
    <div class="absolute inset-0 bg-gradient-to-br from-gray-50 via-white to-gray-50"></div>
    <div class="absolute inset-0 bg-gradient-to-tr from-transparent via-blue-50/20 to-transparent"></div>
  </div>

  <!-- Header -->
  <header class="bg-white/90 backdrop-blur-sm shadow-sm border-b border-gray-200/50 fixed w-full top-0 z-40">
    <div class="px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-16">
        <div class="flex items-center">
          <button
            pButton
            type="button"
            icon="pi pi-bars"
            class="p-button-text p-button-plain p-0 hamburger-button"
            style="width: 40px; height: 40px;"
            (click)="openSidebar()"
            title="Abrir menú"
          ></button>
          <h1 class="text-2xl font-bold text-gray-900 ml-2">{{ title }}</h1>
        </div>
        <div class="flex items-center space-x-4">
          @if (currentUser$ | async; as user) {
            <div class="flex items-center space-x-3">
              <span class="text-gray-700 text-sm">Bienvenido, {{ user.nombre }}</span>
              <button
                pButton
                type="button"
                icon="pi pi-sign-out"
                class="p-button-text p-button-plain"
                (click)="logout()"
                title="Cerrar sesión"
              ></button>
            </div>
          }
        </div>
      </div>
    </div>
  </header>

  <!-- Drawer Sidebar -->
  <p-drawer
    [(visible)]="sidebarVisible"
    [modal]="false"
    [style]="{'width':'300px'}"
    styleClass="modern-sidebar">
    <ng-template pTemplate="header">
      <div class="flex items-center justify-between w-full">
        <span class="text-blue-600/100 text-xl font-semibold">Menú</span>
      </div>
    </ng-template>

    <div class="sidebar-content">
      <!-- Dashboard -->
      <a
        class="menu-item"
        [class.active]="selectedMenu === 'dashboard'"
        (click)="selectMenu('dashboard')"
      >
        <i class="pi pi-home menu-icon"></i>
        <span class="menu-label">Dashboard</span>
      </a>

      <!-- Inventario -->
      <a
        class="menu-item"
        [class.active]="selectedMenu === 'inventario'"
        (click)="selectMenu('inventario')"
      >
        <i class="pi pi-box menu-icon"></i>
        <span class="menu-label">Inventario</span>
      </a>

      <!-- Separador -->
      <div class="menu-separator"></div>

      <!-- Configuración (opcional) -->
      <!-- <a
        class="menu-item"
        [class.active]="selectedMenu === 'configuracion'"
        (click)="selectMenu('configuracion')"
      >
        <i class="pi pi-cog menu-icon"></i>
        <span class="menu-label">Configuración</span>
      </a> -->
    </div>
  </p-drawer>

  <!-- Main Content Area -->
  <main class="pt-16">
    <div class="p-6">
      <h2 class="text-2xl font-semibold text-gray-800 mb-4">
        {{ getSelectedTitle() }}
      </h2>

      <!-- Contenido dinámico según la selección -->
      @if (selectedMenu === 'dashboard') {
        <div>
          <!-- Cards de estadísticas -->
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
            <!-- Tarjeta de Ventas Totales -->
            <app-stat-card
              title="Ventas Totales"
              value="45,231.89"
              prefix="$"
              icon="pi pi-dollar"
              iconColor="primary"
              [trend]="{
                value: 20.1,
                isPositive: true,
                label: 'comparado con el mes anterior'
              }"
            ></app-stat-card>

            <!-- Tarjeta de Productos en Stock -->
            <app-stat-card
              title="Productos en Stock"
              value="1,324"
              icon="pi pi-box"
              iconColor="info"
              [trend]="{
                value: 4.5,
                isPositive: false,
                label: 'comparado con el mes anterior'
              }"
            ></app-stat-card>

            <!-- Tarjeta de Clientes Nuevos -->
            <app-stat-card
              title="Clientes Nuevos"
              value="89"
              icon="pi pi-users"
              iconColor="success"
              [trend]="{
                value: 12.5,
                isPositive: true,
                label: 'este mes'
              }"
            ></app-stat-card>

            <!-- Tarjeta de Pedidos Pendientes -->
            <app-stat-card
              title="Pedidos Pendientes"
              value="23"
              icon="pi pi-shopping-cart"
              iconColor="warning"
              [trend]="{
                value: 8.2,
                isPositive: false,
                label: 'desde ayer'
              }"
            ></app-stat-card>
          </div>

          <!-- Gráficos -->
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
            <!-- Gráfico de Ventas Mensuales -->
            <app-sales-chart></app-sales-chart>

            <!-- Gráfico de Estado del Inventario -->
            <app-inventory-chart></app-inventory-chart>
          </div>

          <!-- Sección de Ventas Recientes y Alertas de Inventario -->
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
            <!-- Ventas Recientes -->
            <app-recent-sales></app-recent-sales>

            <!-- Alertas de Inventario -->
            <app-inventory-alerts></app-inventory-alerts>
          </div>
        </div>
      }

      <!-- Contenido para inventario -->
      @if (selectedMenu === 'inventario') {
        <div>
          <app-inventory></app-inventory>
        </div>
      }

      <!-- Contenido genérico para otras secciones -->
      @if (selectedMenu !== 'dashboard' && selectedMenu !== 'inventario') {
        <div class="bg-white rounded-lg shadow-sm border border-gray-200/50 p-6">
          <p class="text-gray-600">
            Contenido de {{ getSelectedTitle() }}
          </p>
        </div>
      }
    </div>
  </main>

    <!-- Sistema de autenticación tradicional funcionando correctamente ✅ -->
</div>
